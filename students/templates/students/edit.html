{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Редактировать студента</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5">
    <h2 class="mb-4 text-center">Редактировать студента</h2>

    <form method="POST" enctype="multipart/form-data" class="row g-3">
        {% csrf_token %}
        {{ form.non_field_errors }}

        <div class="col-md-6">
            {{ form.first_name.label_tag }}
            {{ form.first_name }}
            {% if form.first_name.errors %}
                <div class="text-danger small">{{ form.first_name.errors|striptags }}</div>
            {% endif %}
        </div>

        <div class="col-md-6">
            {{ form.last_name.label_tag }}
            {{ form.last_name }}
            {% if form.last_name.errors %}
                <div class="text-danger small">{{ form.last_name.errors|striptags }}</div>
            {% endif %}
        </div>

        <div class="col-md-4">
            {{ form.age.label_tag }}
            {{ form.age }}
            {% if form.age.errors %}
                <div class="text-danger small">{{ form.age.errors|striptags }}</div>
            {% endif %}
        </div>

        <div class="col-md-4">
            <label for="{{ form.group.id_for_label }}" class="form-label">{{ form.group.label }}</label>
            <div class="input-group mb-3">
                {{ form.group }}
                <a href="{% url 'add_group' %}" class="btn btn-outline-secondary">+</a>
            </div>
            {% if form.group.errors %}
                <div class="text-danger small">{{ form.group.errors|striptags }}</div>
            {% endif %}
        </div>

        <div class="col-md-4">
            <label for="{{ form.clubs.id_for_label }}" class="form-label">{{ form.clubs.label }}</label>
            <div class="input-group mb-3">
                {{ form.clubs }}
                <a href="{% url 'add_club' %}" class="btn btn-outline-secondary">+</a>
            </div>
            {% if form.clubs.errors %}
                <div class="text-danger small">{{ form.clubs.errors|striptags }}</div>
            {% endif %}
        </div>

        <div class="col-md-4">
            <label class="form-label">Фотография</label>
            {% if form.instance.photo %}
                <img src="{{ form.instance.photo.url }}" width="120" class="img-thumbnail mb-2"><br>
                <a href="{% url 'delete_photo' form.instance.id %}" class="btn btn-outline-danger btn-sm mt-2">Удалить фото</a>
            {% else %}
                <span class="text-muted">Фото не загружено</span>
            {% endif %}
            <input type="file" name="photo" class="form-control mt-2">
        </div>

        <div class="col-12 text-end">
            <button type="submit" class="btn btn-success">Сохранить</button>
            <a href="{% url 'student_list' %}" class="btn btn-secondary">Назад</a>
        </div>
    </form>
</div>
</body>
</html>